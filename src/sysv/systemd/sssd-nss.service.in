[Unit]
Description=SSSD NSS Service responder
Documentation=man:sssd.conf(5)
After=sssd.service
BindsTo=sssd.service
RefuseManualStart=true

[Install]
Also=sssd-nss.socket

[Service]
Environment=DEBUG_LOGGER=--logger=files
EnvironmentFile=-@environment_file@
ExecStart=@libexecdir@/sssd/sssd_nss ${DEBUG_LOGGER} --socket-activated
Restart=on-failure
# 'sssd_nss' is special in that it might be used for resolution of 'User='/'Group='/etc,
# and this may cause the service to hang (loop).
# For this reason avoid '/bin/chown root:root' auxiliary helper
# and don't put 'User=root'/'Group=root' explicitly here (use it as a default instead if needed).
# In case SSSD was built with support of running under non-root user, there is a special
# handling of this situation in 'libnss_sss' and it is allowed to use it as 'User='/'Group='
@nss_service_user_group@
