<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DocBook V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<reference>
<title>SSSD Manual pages</title>
<refentry>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/upstream.xml" />

    <refmeta>
        <refentrytitle>sssd.conf</refentrytitle>
        <manvolnum>5</manvolnum>
        <refmiscinfo class="manual">File Formats and Conventions</refmiscinfo>
    </refmeta>

    <refnamediv id='name'>
        <refname>sssd.conf</refname>
        <refpurpose>the configuration file for SSSD</refpurpose>
    </refnamediv>

    <refsect1 id='file-format'>
        <title>FILE FORMAT</title>

        <para>
            The file has an ini-style syntax and consists of sections and
            parameters. A section begins with the name of the section in
            square brackets and continues until the next section begins. An
            example of section with single and multi-valued parameters:
            <programlisting>
                <replaceable>[section]</replaceable>
                <replaceable>key</replaceable> = <replaceable>value</replaceable>
                <replaceable>key2</replaceable> = <replaceable>value2,value3</replaceable>
            </programlisting>
        </para>

        <para>
            The data types used are string (no quotes needed), integer
            and bool (with values of <quote>TRUE/FALSE</quote>).
        </para>

        <para>
            A line comment starts with a hash sign (<quote>#</quote>) or a
            semicolon (<quote>;</quote>)
        </para>

        <para>
            All sections can have an optional
            <replaceable>description</replaceable> parameter. Its function
            is only as a label for the section.
        </para>

        <para>
            <filename>sssd.conf</filename> must be a regular file, owned by
            root and only root may read from or write to the file.
        </para>
    </refsect1>

    <refsect1 id='special-sections'>
        <title>SPECIAL SECTIONS</title>

        <refsect2 id='services'>
            <title>The [sssd] section</title>
            <para>
                Individual pieces of SSSD functionality are provided by special
                SSSD services that are started and stopped together with SSSD.
                The services are managed by a special service frequently called
                <quote>monitor</quote>. The <quote>[sssd]</quote> section is used
                to configure the monitor as well as some other important options
                like the identity domains.
                <variablelist>
                    <title>Section parameters</title>
                    <varlistentry>
                        <term>config_file_version (integer)</term>
                        <listitem>
                            <para>
                                Indicates what is the syntax of the config
                                file. SSSD 0.6.0 and later use version 2.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>services</term>
                        <listitem>
                            <para>
                                Comma separated list of services that are
                                started when sssd itself starts.
                            </para>
                            <para>
                                Supported services: nss, pam
                                <phrase condition="with_sudo">, sudo</phrase>
                                <phrase condition="with_autofs">, autofs</phrase>
                                <phrase condition="with_ssh">, ssh</phrase>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>reconnection_retries (integer)</term>
                        <listitem>
                            <para>
                                Number of times services should attempt to
                                reconnect in the event of a Data Provider
                                crash or restart before they give up
                            </para>
                            <para>
                                Default: 3
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>domains</term>
                        <listitem>
                            <para>
                                A domain is a database containing user
                                information. SSSD can use more domains
                                at the same time, but at least one
                                must be configured or SSSD won't start.
                                This parameter described the list of domains
                                in the order you want them to be queried.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>re_expression (string)</term>
                        <listitem>
                            <para>
                                Regular expression that describes how to parse the string
                                containing user name and domain into these components.
                            </para>
                            <para>
                                Default: <quote>(?P&lt;name&gt;[^@]+)@?(?P&lt;domain&gt;[^@]*$)</quote>
                                which translates to "the name is everything up to the
                                <quote>@</quote> sign, the domain everything after that"
                            </para>
                            <para>
                                PLEASE NOTE: the support for non-unique named
                                subpatterns is not available on all platforms
                                (e.g. RHEL5 and SLES10). Only platforms with
                                libpcre version 7 or higher can support non-unique
                                named subpatterns.
                            </para>
                            <para>
                                PLEASE NOTE ALSO: older version of libpcre only
                                support the Python syntax (?P&lt;name&gt;) to label
                                subpatterns.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>full_name_format (string)</term>
                        <listitem>
                            <para>
                                A <citerefentry>
                                    <refentrytitle>printf</refentrytitle>
                                    <manvolnum>3</manvolnum>
                                </citerefentry>-compatible format that describes how to
                                translate a (name, domain) tuple into a fully qualified
                                name.
                            </para>
                            <para>
                                Default: <quote>%1$s@%2$s</quote>.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>try_inotify (boolean)</term>
                        <listitem>
                            <para>
                                SSSD monitors the state of resolv.conf to
                                identify when it needs to update its internal
                                DNS resolver. By default, we will attempt to
                                use inotify for this, and will fall back to
                                polling resolv.conf every five seconds if
                                inotify cannot be used.
                            </para>
                            <para>
                                There are some limited situations where it is
                                preferred that we should skip even trying to
                                use inotify. In these rare cases, this option
                                should be set to 'false'
                            </para>
                            <para>
                                Default: true on platforms where inotify is
                                supported. False on other platforms.
                            </para>
                            <para>
                                Note: this option will have no effect on
                                platforms where inotify is unavailable. On
                                these platforms, polling will always be used.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>krb5_rcache_dir (string)</term>
                        <listitem>
                            <para>
                                Directory on the filesystem where SSSD should
                                store Kerberos replay cache files.
                            </para>
                            <para>
                                This option accepts a special value
                                __LIBKRB5_DEFAULTS__ that will instruct SSSD
                                to let libkrb5 decide the appropriate
                                location for the replay cache.
                            </para>
                            <para>
                                Default: Distribution-specific and specified
                                at build-time. (__LIBKRB5_DEFAULTS__ if not
                                configured)
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </para>
        </refsect2>

    </refsect1>

    <refsect1 id='services-sections'>
        <title>SERVICES SECTIONS</title>
        <para>
            Settings that can be used to configure different services
            are described in this section. They should reside in the
            [<replaceable>$NAME</replaceable>] section, for example,
            for NSS service, the section would be <quote>[nss]</quote>
        </para>

        <refsect2 id='general'>
            <title>General service configuration options</title>
            <para>
                These options can be used to configure any service.
            </para>
            <variablelist>
                <varlistentry>
                    <term>debug_level (integer)</term>
                    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/debug_levels.xml" />
                </varlistentry>
                <varlistentry>
                    <term>debug_timestamps (bool)</term>
                    <listitem>
                        <para>
                            Add a timestamp to the debug messages
                        </para>
                        <para>
                            Default: true
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>debug_microseconds (bool)</term>
                    <listitem>
                        <para>
                            Add microseconds to the timestamp in debug messages
                        </para>
                        <para>
                            Default: false
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>timeout (integer)</term>
                    <listitem>
                        <para>
                            Timeout in seconds between heartbeats for this
                            service. This is used to ensure that the process
                            is alive and capable of answering requests.
                        </para>
                        <para>
                            Default: 10
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>reconnection_retries (integer)</term>
                    <listitem>
                        <para>
                            Number of times services should attempt to
                            reconnect in the event of a Data Provider
                            crash or restart before they give up
                        </para>
                        <para>
                            Default: 3
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>

        <refsect2 id='NSS'>
            <title>NSS configuration options</title>
            <para>
                These options can be used to configure the
                Name Service Switch (NSS) service.
            </para>
            <variablelist>
                <varlistentry>
                    <term>enum_cache_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss cache enumerations
                            (requests for info about all users)
                        </para>
                        <para>
                            Default: 120
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>entry_cache_nowait_percentage (integer)</term>
                    <listitem>
                        <para>
                            The entry cache can be set to automatically update
                            entries in the background if they are requested
                            beyond a percentage of the entry_cache_timeout
                            value for the domain.
                        </para>
                        <para>
                            For example, if the domain's entry_cache_timeout
                            is set to 30s and entry_cache_nowait_percentage is
                            set to 50 (percent), entries that come in after 15
                            seconds past the last cache update will be
                            returned immediately, but the SSSD will go and
                            update the cache on its own, so that future
                            requests will not need to block waiting for a
                            cache update.
                        </para>
                        <para>
                            Valid values for this option are 0-99 and
                            represent a percentage of the entry_cache_timeout
                            for each domain. For performance reasons, this
                            percentage will never reduce the nowait timeout to
                            less than 10 seconds.
                            (0 disables this feature)
                        </para>
                        <para>
                            Default: 50
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>entry_negative_timeout (integer)</term>
                    <listitem>
                        <para>
                            Specifies for how many seconds nss_sss should cache
                            negative cache hits (that is, queries for
                            invalid database entries, like nonexistent ones)
                            before asking the back end again.
                        </para>
                        <para>
                            Default: 15
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>filter_users, filter_groups (string)</term>
                    <listitem>
                        <para>
                            Exclude certain users from being fetched from the sss
                            NSS database. This is particularly useful for system
                            accounts. This option can also be set per-domain or
                            include fully-qualified names to filter only users from
                            the particular domain.
                        </para>
                        <para>
                            Default: root
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>filter_users_in_groups (bool)</term>
                    <listitem>
                        <para>
                            If you want filtered user still be group members
                            set this option to false.
                        </para>
                        <para>
                            Default: true
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>override_homedir (string)</term>
                    <listitem>
                        <para>
                            Override the user's home directory. You
                            can either provide an absolute value or a
                            template. In the template, the following
                            sequences are substituted:
                            <variablelist>
                                <varlistentry>
                                    <term>%u</term>
                                    <listitem><para>login name</para></listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>%U</term>
                                    <listitem><para>UID number</para></listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>%d</term>
                                    <listitem><para>domain name</para></listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>%f</term>
                                    <listitem><para>fully qualified user name (user@domain)</para></listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>%%</term>
                                    <listitem><para>a literal '%'</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </para>
                        <para>
                            This option can also be set per-domain.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>allowed_shells (string)</term>
                    <listitem>
                        <para>
                            Restrict user shell to one of the listed values. The order of evaluation is:
                        </para>
                        <para>
                            1. If the shell is present in
                            <quote>/etc/shells</quote>, it is used.
                        </para>
                        <para>
                            2. If the shell is in the allowed_shells list but
                            not in <quote>/etc/shells</quote>, use the
                            value of the shell_fallback parameter.
                        </para>
                        <para>
                            3. If the shell is not in the allowed_shells list and
                            not in <quote>/etc/shells</quote>, a nologin shell
                            is used.
                        </para>
                        <para>
                            An empty string for shell is passed as-is to libc.
                        </para>
                        <para>
                            The <quote>/etc/shells</quote> is only read on SSSD start up, which means that
                            a restart of the SSSD is required in case a new shell is installed.
                        </para>
                        <para>
                            Default: Not set. The user shell is automatically used.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>vetoed_shells (string)</term>
                    <listitem>
                        <para>
                            Replace any instance of these shells with the shell_fallback
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>shell_fallback (string)</term>
                    <listitem>
                        <para>
                            The default shell to use if an allowed shell is not
                            installed on the machine.
                        </para>
                        <para>
                            Default: /bin/sh
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>
        <refsect2 id='PAM'>
            <title>PAM configuration options</title>
            <para>
                These options can be used to configure the
                Pluggable Authentication Module (PAM) service.
            </para>
            <variablelist>
                <varlistentry>
                    <term>offline_credentials_expiration (integer)</term>
                    <listitem>
                        <para>
                            If the authentication provider is offline, how
                            long should we allow cached logins (in days since
                            the last successful online login).
                        </para>
                        <para>
                            Default: 0 (No limit)
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>offline_failed_login_attempts (integer)</term>
                    <listitem>
                        <para>
                            If the authentication provider is offline, how
                            many failed login attempts are allowed.
                        </para>
                        <para>
                            Default: 0 (No limit)
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>offline_failed_login_delay (integer)</term>
                    <listitem>
                        <para>
                            The time in minutes which has to pass after
                            offline_failed_login_attempts has been reached
                            before a new login attempt is possible.
                        </para>
                        <para>
                            If set to 0 the user cannot authenticate offline if
                            offline_failed_login_attempts has been reached. Only
                            a successful online authentication can enable
                            offline authentication again.
                        </para>
                        <para>
                            Default: 5
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>pam_verbosity (integer)</term>
                    <listitem>
                        <para>
                            Controls what kind of messages are shown to the user
                            during authentication. The higher the number to more
                            messages are displayed.
                        </para>
                        <para>
                             Currently sssd supports the following values:
                        </para>
                        <para>
                             <emphasis>0</emphasis>: do not show any message
                        </para>
                        <para>
                             <emphasis>1</emphasis>: show only important
                             messages
                        </para>
                        <para>
                             <emphasis>2</emphasis>: show informational messages
                        </para>
                        <para>
                             <emphasis>3</emphasis>: show all messages and debug
                             information
                        </para>
                        <para>
                            Default: 1
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                  <term>pam_id_timeout (integer)</term>
                  <listitem>
                    <para>
                      For any PAM request while SSSD is online, the SSSD will
                      attempt to immediately update the cached identity
                      information for the user in order to ensure that
                      authentication takes place with the latest information.
                    </para>
                    <para>
                      A complete PAM conversation may perform multiple PAM
                      requests, such as account management and session
                      opening. This option controls (on a
                      per-client-application basis) how long (in seconds) we
                      can cache the identity information to avoid excessive
                      round-trips to the identity provider.
                    </para>
                    <para>
                      Default: 5
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>pam_pwd_expiration_warning (integer)</term>
                  <listitem>
                    <para>
                      Display a warning N days before the password expires.
                    </para>
                    <para>
                      Please note that the backend server has to provide
                      information about the expiration time of the password.
                      If this information is missing, sssd cannot display a
                      warning.
                    </para>
                    <para>
                      Default: 7
                    </para>
                  </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>

        <refsect2 id='SUDO' condition="with_sudo">
            <title>SUDO configuration options</title>
            <para>
                These options can be used to configure the sudo service.
            </para>
            <para>
                <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/experimental.xml" />
            </para>
            <variablelist>
                <varlistentry>
                    <term>sudo_cache_timeout (integer)</term>
                    <listitem>
                        <para>
                            For any sudo request that comes while SSSD is
                            online, the SSSD will attempt to update the cached
                            rules in order to ensure that sudo has the latest
                            ruleset.
                        </para>
                        <para>
                            The user may, however, run a couple of sudo commands
                            successively, which would trigger multiple LDAP requests.
                            In order to speed up this use-case, the sudo service
                            maintains an in-memory cache that would be used for
                            performing fast replies.
                        </para>
                        <para>
                            This option controls how long (in seconds) can the sudo
                            service cache rules for a user.
                        </para>
                        <para>
                            Default: 180
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>sudo_timed (bool)</term>
                    <listitem>
                        <para>
                            Whether or not to evaluate the sudoNotBefore
                            and sudoNotAfter attributes that implement
                            time-dependent sudoers entries.
                        </para>
                        <para>
                            Default: false
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>

        <refsect2 id='AUTOFS' condition="with_autofs">
            <title>AUTOFS configuration options</title>
            <para>
                These options can be used to configure the autofs service.
            </para>
            <para>
                <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/experimental.xml" />
            </para>

            <variablelist>
                <varlistentry>
                    <term>autofs_negative_timeout (integer)</term>
                    <listitem>
                        <para>
                            Specifies for how many seconds should the
                            autofs responder negative cache hits
                            (that is, queries for invalid map entries,
                            like nonexistent ones) before asking the back
                            end again.
                        </para>
                        <para>
                            Default: 15
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>

    </refsect1>

    <refsect1 id='domain-sections'>
        <title>DOMAIN SECTIONS</title>
        <para>
            These configuration options can be present in a domain
            configuration section, that is, in a section called
            <quote>[domain/<replaceable>NAME</replaceable>]</quote>
            <variablelist>
                <varlistentry>
                    <term>min_id,max_id (integer)</term>
                    <listitem>
                        <para>
                            UID and GID limits for the domain. If a domain
                            contains an entry that is outside these limits, it
                            is ignored.
                        </para>
                        <para>
                            For users, this affects the primary GID limit. The
                            user will not be returned to NSS if either the
                            UID or the primary GID is outside the range. For
                            non-primary group memberships, those that are in
                            range will be reported as expected.
                        </para>
                        <para>
                            Default: 1 for min_id, 0 (no limit) for max_id
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>enumerate (bool)</term>
                    <listitem>
                        <para>
                            Determines if a domain can be enumerated. This
                            parameter can have one of the following values:
                        </para>
                        <para>
                            TRUE = Users and groups are enumerated
                        </para>
                        <para>
                            FALSE = No enumerations for this domain
                        </para>
                        <para>
                            Default: FALSE
                        </para>
                        <para>
                            Note: Enabling enumeration has a moderate
                            performance impact on SSSD while enumeration
                            is running. It may take up to several minutes
                            after SSSD startup to fully complete enumerations.
                            During this time, individual requests for
                            information will go directly to LDAP, though it
                            may be slow, due to the heavy enumeration
                            processing.
                        </para>
                        <para>
                            While the first enumeration is running, requests
                            for the complete user or group lists may return
                            no results until it completes.
                        </para>
                        <para>
                            Further, enabling enumeration may increase the time
                            necessary to detect network disconnection, as
                            longer timeouts are required to ensure that
                            enumeration lookups are completed successfully.
                            For more information, refer to the man pages for
                            the specific id_provider in use.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>entry_cache_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss consider
                            entries valid before asking the backend again
                        </para>
                        <para>
                            Default: 5400
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>entry_cache_user_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss consider
                            user entries valid before asking the backend again
                        </para>
                        <para>
                            Default: entry_cache_timeout
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>entry_cache_group_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss consider
                            group entries valid before asking the backend again
                        </para>
                        <para>
                            Default: entry_cache_timeout
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>entry_cache_netgroup_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss consider
                            netgroup entries valid before asking the backend again
                        </para>
                        <para>
                            Default: entry_cache_timeout
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>entry_cache_service_timeout (integer)</term>
                    <listitem>
                        <para>
                            How many seconds should nss_sss consider
                            service entries valid before asking the backend again
                        </para>
                        <para>
                            Default: entry_cache_timeout
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>cache_credentials (bool)</term>
                    <listitem>
                        <para>
                            Determines if user credentials are also cached
                            in the local LDB cache
                        </para>
                        <para>
                            User credentials are stored in a SHA512 hash, not
                            in plaintext
                        </para>
                        <para>
                            Default: FALSE
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>account_cache_expiration (integer)</term>
                    <listitem>
                        <para>
                            Number of days entries are left in cache after
                            last successful login before being removed during
                            a cleanup of the cache. 0 means keep forever.
                            The value of this parameter must be greater than or
                            equal to offline_credentials_expiration.
                        </para>
                        <para>
                            Default: 0 (unlimited)
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>id_provider (string)</term>
                    <listitem>
                        <para>
                            The Data Provider identity backend to use for this
                            domain.
                        </para>
                        <para>
                            Supported backends:
                        </para>
                        <para>
                            proxy: Support a legacy NSS provider
                        </para>
                        <para>
                            local: SSSD internal local provider
                        </para>
                        <para>
                            ldap:  LDAP provider
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>use_fully_qualified_names (bool)</term>
                    <listitem>
                        <para>
                            If set to TRUE, all requests to this domain
                            must use fully qualified names. For example,
                            if used in LOCAL domain that contains a "test"
                            user, <command>getent passwd test</command>
                            wouldn't find the user while <command>getent
                            passwd test@LOCAL</command> would.
                        </para>
                        <para>
                            Default: FALSE
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>auth_provider (string)</term>
                    <listitem>
                        <para>
                            The authentication provider used for the domain.
                            Supported auth providers are:
                        </para>
                        <para>
                            <quote>ldap</quote> for native LDAP authentication. See
                            <citerefentry>
                                <refentrytitle>sssd-ldap</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring LDAP.
                        </para>
                        <para>
                            <quote>krb5</quote> for Kerberos authentication. See
                            <citerefentry>
                                <refentrytitle>sssd-krb5</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring Kerberos.
                        </para>
                        <para>
                            <quote>proxy</quote> for relaying authentication to some other PAM target.
                        </para>
                        <para>
                            <quote>none</quote> disables authentication explicitly.
                        </para>
                        <para>
                            Default: <quote>id_provider</quote> is used if it
                            is set and can handle authentication requests.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>access_provider (string)</term>
                    <listitem>
                        <para>
                            The access control provider used for the domain.
                            There are two built-in access providers (in
                            addition to any included in installed backends)
                            Internal special providers are:
                        </para>
                        <para>
                            <quote>permit</quote> always allow access.
                        </para>
                        <para>
                            <quote>deny</quote> always deny access.
                        </para>
                        <para>
                            <quote>simple</quote> access control based on access
                            or deny lists. See <citerefentry>
                            <refentrytitle>sssd-simple</refentrytitle>
                            <manvolnum>5</manvolnum></citerefentry> for more
                            information on configuring the simple access module.
                        </para>
                        <para>
                            Default: <quote>permit</quote>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>chpass_provider (string)</term>
                    <listitem>
                        <para>
                            The provider which should handle change password
                            operations for the domain.
                            Supported change password providers are:
                        </para>
                        <para>
                            <quote>ipa</quote> to change a password stored
                            in an IPA server.  See
                            <citerefentry>
                                <refentrytitle>sssd-ipa</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring IPA.
                        </para>
                        <para>
                            <quote>ldap</quote> to change a password stored
                            in a LDAP server.  See
                            <citerefentry>
                                <refentrytitle>sssd-ldap</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring LDAP.
                        </para>
                        <para>
                            <quote>krb5</quote>  to change the Kerberos
                            password. See
                            <citerefentry>
                                <refentrytitle>sssd-krb5</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring Kerberos.
                        </para>
                        <para>
                            <quote>proxy</quote> for relaying password changes
                            to some other PAM target.
                        </para>
                        <para>
                            <quote>none</quote> disallows password changes explicitly.
                        </para>
                        <para>
                            Default: <quote>auth_provider</quote> is used if it
                            is set and can handle change password requests.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry condition="with_sudo">
                    <term>sudo_provider (string)</term>
                    <listitem>
                        <para>
                            <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/experimental.xml" />
                        </para>
                        <para>
                            The SUDO provider used for the domain.
                            Supported SUDO providers are:
                        </para>
                        <para>
                            <quote>ldap</quote> for rules stored in LDAP. See
                            <citerefentry>
                                <refentrytitle>sssd-ldap</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring LDAP.
                        </para>
                        <para>
                            <quote>none</quote> disables SUDO explicitly.
                        </para>
                        <para>
                            Default: The value of <quote>id_provider</quote> is used if it
                            is set.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>session_provider (string)</term>
                    <listitem>
                        <para>
                            The provider which should handle loading of session
                            settings.
                            Supported session providers are:
                        </para>
                        <para>
                            <quote>ipa</quote> to load session settings
                            from an IPA server. See
                            <citerefentry>
                                <refentrytitle>sssd-ipa</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring IPA.
                        </para>
                        <para>
                            <quote>none</quote> disallows fetching session settings explicitly.
                        </para>
                        <para>
                            Default: <quote>id_provider</quote> is used if it
                            is set and can handle session loading requests.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry condition="with_autofs">
                    <term>autofs_provider (string)</term>
                    <listitem>
                        <para>
                            <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="include/experimental.xml" />
                        </para>
                        <para>
                            The autofs provider used for the domain.
                            Supported autofs providers are:
                        </para>
                        <para>
                            <quote>ldap</quote> to load maps stored in LDAP. See
                            <citerefentry>
                                <refentrytitle>sssd-ldap</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring LDAP.
                        </para>
                        <para>
                            <quote>ipa</quote> to load maps stored in an IPA
                            server. See
                            <citerefentry>
                                <refentrytitle>sssd-ipa</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring IPA.
                        </para>
                        <para>
                            <quote>none</quote> disables autofs explicitly.
                        </para>
                        <para>
                            Default: The value of <quote>id_provider</quote> is used if it
                            is set.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>hostid_provider (string)</term>
                    <listitem>
                        <para>
                            The provider used for retrieving host identity information.
                            Supported hostid providers are:
                        </para>
                        <para>
                            <quote>ipa</quote> to load host identity stored in an IPA
                            server. See
                            <citerefentry>
                                <refentrytitle>sssd-ipa</refentrytitle>
                                <manvolnum>5</manvolnum>
                            </citerefentry> for more information on configuring IPA.
                        </para>
                        <para>
                            <quote>none</quote> disables hostid explicitly.
                        </para>
                        <para>
                            Default: The value of <quote>id_provider</quote> is used if it
                            is set.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>lookup_family_order (string)</term>
                    <listitem>
                        <para>
                            Provides the ability to select preferred address family
                            to use when performing DNS lookups.
                        </para>
                        <para>
                            Supported values:
                        </para>
                        <para>
                            ipv4_first: Try looking up IPv4 address, if that fails, try IPv6
                        </para>
                        <para>
                            ipv4_only: Only attempt to resolve hostnames to IPv4 addresses.
                        </para>
                        <para>
                            ipv6_first: Try looking up IPv6 address, if that fails, try IPv4
                        </para>
                        <para>
                            ipv6_only: Only attempt to resolve hostnames to IPv6 addresses.
                        </para>
                        <para>
                            Default: ipv4_first
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>dns_resolver_timeout (integer)</term>
                    <listitem>
                        <para>
                            Defines the amount of time (in seconds) to wait for a reply from
                            the DNS resolver before assuming that it is unreachable. If this
                            timeout is reached, the domain will continue to operate in
                            offline mode.
                        </para>
                        <para>
                            Default: 5
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>dns_discovery_domain (string)</term>
                    <listitem>
                        <para>
                            If service discovery is used in the back end, specifies
                            the domain part of the service discovery DNS query.
                        </para>
                        <para>
                            Default: Use the domain part of machine's hostname
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>override_gid (integer)</term>
                    <listitem>
                        <para>
                            Override the primary GID value with the one specified.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>case_sensitive (boolean)</term>
                    <listitem>
                        <para>
                            Treat user and group names as case sensitive. At
                            the moment, this option is not supported in
                            the local provider.
                        </para>
                        <para>
                            Default: True
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </para>

        <para>
            Options valid for proxy domains.

            <variablelist>
                <varlistentry>
                    <term>proxy_pam_target (string)</term>
                    <listitem>
                        <para>
                            The proxy target PAM proxies to.
                        </para>
                        <para>
                            Default: not set by default, you have to take an
                            existing pam configuration or create a new one and
                            add the service name here.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>proxy_lib_name (string)</term>
                    <listitem>
                        <para>
                            The name of the NSS library to use in proxy
                            domains. The NSS functions searched for in the
                            library are in the form of
                            _nss_$(libName)_$(function), for example
                            _nss_files_getpwent.
                        </para>
                    </listitem>
                </varlistentry>

                <varlistentry>
                    <term>proxy_fast_alias (boolean)</term>
                    <listitem>
                        <para>
                            When a user or group is looked up by name in
                            the proxy provider, a second lookup by ID is
                            performed to "canonicalize" the name in case
                            the requested name was an alias. Setting this
                            option to true would cause the SSSD to perform
                            the ID lookup from cache for performance reasons.
                        </para>
                        <para>
                            Default: false
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </para>

        <refsect2 id='local_domain'>
            <title>The local domain section</title>
            <para>
                This section contains settings for domain that stores users and
                groups in SSSD native database, that is, a domain that uses
                <replaceable>id_provider=local</replaceable>.
            </para>
            <variablelist>
                <title>Section parameters</title>
                <varlistentry>
                    <term>default_shell (string)</term>
                    <listitem>
                        <para>
                            The default shell for users created
                            with SSSD userspace tools.
                        </para>
                        <para>
                            Default: <filename>/bin/bash</filename>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>base_directory (string)</term>
                    <listitem>
                        <para>
                            The tools append the login name to
                            <replaceable>base_directory</replaceable> and
                            use that as the home directory.
                        </para>
                        <para>
                            Default: <filename>/home</filename>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>create_homedir (bool)</term>
                    <listitem>
                        <para>
                            Indicate if a home directory should be created by default for new users.
                            Can be overridden on command line.
                        </para>
                        <para>
                            Default: TRUE
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>remove_homedir (bool)</term>
                    <listitem>
                        <para>
                            Indicate if a home directory should be removed by default for deleted users.
                            Can be overridden on command line.
                        </para>
                        <para>
                            Default: TRUE
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>homedir_umask (integer)</term>
                    <listitem>
                        <para>
                            Used by
                            <citerefentry>
                                <refentrytitle>sss_useradd</refentrytitle>
                                <manvolnum>8</manvolnum>
                            </citerefentry> to specify the default permissions on a newly created
                            home directory.
                        </para>
                        <para>
                            Default: 077
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>skel_dir (string)</term>
                    <listitem>
                        <para>
                            The skeleton directory, which contains files
                            and directories to be copied in the user's
                            home directory, when the home directory is
                            created by
                            <citerefentry>
                                <refentrytitle>sss_useradd</refentrytitle>
                                <manvolnum>8</manvolnum>
                            </citerefentry>
                        </para>
                        <para>
                            Default: <filename>/etc/skel</filename>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>mail_dir (string)</term>
                    <listitem>
                        <para>
                            The mail spool directory. This is needed to
                            manipulate the mailbox when its corresponding
                            user account is modified or deleted.
                            If not specified, a default
                            value is used.
                        </para>
                        <para>
                            Default: <filename>/var/mail</filename>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>userdel_cmd (string)</term>
                    <listitem>
                        <para>
                            The command that is run after a user is removed.
                            The command us passed the username of the user being
                            removed as the first and only parameter. The return
                            code of the command is not taken into account.
                        </para>
                        <para>
                            Default: None, no command is run
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>

    </refsect1>

    <refsect1 id='example'>
        <title>EXAMPLE</title>
        <para>
            The following example shows a typical SSSD config. It does
            not describe configuration of the domains themselves - refer to
            documentation on configuring domains for more details.
<programlisting>
[sssd]
domains = LDAP
services = nss, pam
config_file_version = 2

[nss]
filter_groups = root
filter_users = root

[pam]

[domain/LDAP]
id_provider = ldap
ldap_uri = ldap://ldap.example.com
ldap_search_base = dc=example,dc=com

auth_provider = krb5
krb5_server = kerberos.example.com
krb5_realm = EXAMPLE.COM
cache_credentials = true

min_id = 10000
max_id = 20000
enumerate = False
</programlisting>
        </para>
    </refsect1>

    <refsect1 id='see_also'>
        <title>SEE ALSO</title>
        <para>
            <citerefentry>
                <refentrytitle>sssd-ldap</refentrytitle><manvolnum>5</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sssd-krb5</refentrytitle><manvolnum>5</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_groupadd</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_groupdel</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_groupmod</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_useradd</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_userdel</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>sss_usermod</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>,
            <citerefentry>
                <refentrytitle>pam_sss</refentrytitle><manvolnum>8</manvolnum>
            </citerefentry>.
        </para>
    </refsect1>
</refentry>
</reference>
